<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ìˆ˜ì–´ì˜ìƒ í•™ìŠµ ì‚¬ì´íŠ¸</title>
  <style>
    body { background:#0f172a; color:#e5e7eb; font-family: system-ui, sans-serif; margin:0; }
    header { background:#111827; padding:12px 16px; position:sticky; top:0; }
    h1 { margin:0; font-size:20px; }
    .wrap { max-width:800px; margin:0 auto; padding:16px; }
    video { width:100%; border-radius:12px; background:#000; }
    button { margin:4px; padding:8px 12px; border-radius:8px; cursor:pointer; border:none; font-size:14px; }
    .secondary { background:#1f2937; color:#e5e7eb; }
    .ghost { background:transparent; color:#e5e7eb; border:1px dashed #4b5563; }
    .answer { display:none; margin-top:10px; padding:8px; background:rgba(34,197,94,0.1); border-radius:8px; }
    .memo { margin-top:12px; }
    .memo textarea { width:100%; min-height:80px; border-radius:8px; padding:8px; background:#0b1220; color:#e5e7eb; border:1px solid #374151; }
    .controls { margin-top:8px; }
  </style>
</head>
<body>
  <header>
    <h1>ìˆ˜ì–´ì˜ìƒ í•™ìŠµ ì‚¬ì´íŠ¸</h1>
  </header>
  <main class="wrap">
    <div id="card"></div>
    <div class="controls">
      <button id="prevBtn" class="secondary">â¬… ì´ì „</button>
      <button id="nextBtn" class="secondary">ë‹¤ìŒ â¡</button>
      <button id="toggleAnswer" class="secondary">ì •ë‹µí™•ì¸</button>
      <button id="slower" class="ghost">âª ëŠë¦¬ê²Œ</button>
      <button id="faster" class="ghost">â© ë¹ ë¥´ê²Œ</button>
    </div>
    <div class="answer" id="answer"></div>
    <div class="memo">
      <textarea id="memoBox" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ê±°ë‚˜ ìŒì„±ìœ¼ë¡œ ê¸°ë¡í•˜ì„¸ìš”..."></textarea>
      <div>
        <button id="voiceBtn" class="secondary">ğŸ™ï¸ ìŒì„±ì…ë ¥</button>
      </div>
    </div>
  </main>

  <script>
    const data = [
      { k:"ì¢…", ex:"ë‚˜ëŠ” ë”¸ê³¼ ê±·ë˜ ì¤‘ì— ë”¸ì´ ì¢…ì„ ì‚¬ë‹¬ë¼ê³  ì¡¸ë¼ì„œ ë”¸ì—ê²Œ ì¢…ì„ ì‚¬ ì£¼ì—ˆë‹¤.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202410/LJnoOaDhWmp79ayX.mp4" },
      { k:"ì¢…", ex:"ìƒˆí•´ë¥¼ ë§ì•„ ì œì•¼ì˜ ì¢…ì†Œë¦¬ê°€ ìš¸ë ¤ í¼ì¡Œë‹¤.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202410/q7oplifUF3jxiflF.mp4" },
      { k:"ì–¸ë‹ˆ, ëˆ„ë‚˜", ex:"ìš°ë¦¬ ì–¸ë‹ˆëŠ” ì”ì†Œë¦¬ ëŒ€ë§ˆì™•ì´ë‹¤.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202411/KAzk0Lpg8kVYKDIE.mp4" },
      { k:"ì–¸ë‹ˆ, ëˆ„ë‚˜", ex:"ìš°ë¦¬ ì–¸ë‹ˆë‘ ë‚˜ë‘ ì–¼êµ´ì´ ë˜‘ê°™ë‹¤ê³ ? ê·¸ëŸ° ë§ì€ ì²˜ìŒ ë“¤ì–´.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202411/RPeMYLOXzDIFD77p.mp4" },
      { k:"ì–¸ë‹ˆ, ëˆ„ë‚˜", ex:"ìš°ë¦¬ ì–¸ë‹ˆëŠ” í•­ê³µì‚¬ì—ì„œ ì¼í•œë‹¤.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202411/aPHbBWANGd2ROYhJ.mp4" },
      { k:"ì–¸ë‹ˆ, ëˆ„ë‚˜", ex:"ë‚˜ëŠ” ë‚¨ë™ìƒì€ ìˆê³  ì–¸ë‹ˆëŠ” ì—†ë‹¤.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202411/68EphdW6QNnndXSG.mp4" },
      { k:"ì•„ì´ê³ , ì•„ë¿”ì‹¸", ex:"ë‚˜ëŠ” ë¼ë©´ì„ ë“ì—¬ì„œ ë¨¹ë‹¤ê°€ ê³„ë€ì„ ë„£ëŠ” ê²ƒì„ ê¹œë°•í–ˆë‹¤ëŠ” ê±¸ ê¹¨ë‹¬ì•˜ë‹¤.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202411/hHjAX8dOCpXMUKcG.mp4" },
      { k:"ì•„ì´ê³ , ì•„ë¿”ì‹¸", ex:"ê°€: ì˜¤í›„ì— ë¹„ê°€ ë‚´ë¦°ë‹¤ëŠ”ë°, ìš°ì‚° ì±™ê²¼ì–´? ë‚˜: ì•„ì´ê³ . ê¹œë¹¡í–ˆë„¤.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202411/a3mFRN8ardsnitaQ.mp4" },
      { k:"ì•„ì´ê³ , ì•„ë¿”ì‹¸", ex:"ë‚˜ëŠ” ë¹„í–‰ê¸°ë¥¼ íƒ€ê³  ë‚˜ì„œì•¼ í•¸ë“œí° ì¶©ì „ê¸°ë¥¼ ì§‘ì— ë‘ê³  ì˜¨ ê²ƒì´ ìƒê°ë‚¬ë‹¤.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202411/CpIXrdKcNgjECYYN.mp4" },
      { k:"ì•„ì´ê³ , ì•„ë¿”ì‹¸", ex:"ë‚˜ëŠ” ì¶•êµ¬ ê²½ê¸°ì—ì„œ, ì–´ë µê²Œ ê³¨ëŒ€ ì•ê¹Œì§€ ê°€ì„œ ìŠ›ì„ ë‚ ë ¸ëŠ”ë° ê³µì´ ê³¨ëŒ€ë¥¼ ë¹—ê²¨ ë‚˜ê°€ê³  ë§ì•˜ë‹¤.", src:"https://ksldict.korean.go.kr/kslserv/signFile/video/exmp/202411/4xPXgFiK9GgfH9Lb.mp4" }
    ];

    let idx = 0;
    const cardDiv = document.getElementById('card');
    const answerDiv = document.getElementById('answer');
    const memoBox = document.getElementById('memoBox');

    function render(){
      const item = data[idx];
      cardDiv.innerHTML = `
        <h3>í•œêµ­ì–´ ëŒ€ì‘í‘œí˜„: ${item.k}</h3>
        <video id="video" controls src="${item.src}"></video>
      `;
      answerDiv.style.display = 'none';
      answerDiv.textContent = item.ex;
      memoBox.value = localStorage.getItem(`memo::${item.src}`)||'';
    }

    render();

    document.getElementById('prevBtn').onclick = ()=>{ idx=(idx-1+data.length)%data.length; render(); };
    document.getElementById('nextBtn').onclick = ()=>{ idx=(idx+1)%data.length; render(); };
    document.getElementById('toggleAnswer').onclick = ()=>{
      answerDiv.style.display = (answerDiv.style.display==='block'?'none':'block');
    };

    document.getElementById('slower').onclick = ()=>{
      const v=document.getElementById('video');
      v.playbackRate=Math.max(0.25, v.playbackRate-0.25);
    };
    document.getElementById('faster').onclick = ()=>{
      const v=document.getElementById('video');
      v.playbackRate=Math.min(3, v.playbackRate+0.25);
    };

    memoBox.addEventListener('input', ()=>{
      const item = data[idx];
      localStorage.setItem(`memo::${item.src}`, memoBox.value);
    });

    // ìŒì„± ì…ë ¥ -> í…ìŠ¤íŠ¸ ë³€í™˜
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    let rec;
    if(SpeechRecognition){
      rec = new SpeechRecognition();
      rec.lang='ko-KR';
      rec.continuous=false;
      rec.interimResults=false;
      rec.onresult = e=>{
        const text = e.results[0][0].transcript;
        memoBox.value += (memoBox.value? ' ':'')+ text;
        const item=data[idx];
        localStorage.setItem(`memo::${item.src}`, memoBox.value);
      };
    }

    document.getElementById('voiceBtn').onclick = ()=>{
      if(!rec){ alert('ìŒì„± ì¸ì‹ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'); return; }
      try{ rec.start(); }catch(err){ console.error(err); }
    };
  </script>
</body>
</html>
